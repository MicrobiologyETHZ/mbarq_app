import streamlit as st
from PIL import Image
#from pages import library_map
import pandas as pd

st.set_page_config(page_title="mBARq App", layout='wide',
                   page_icon=Image.open("images/image.png")
                    )
st.image("images/mbarq-logo.png")


class LoadDataSet:

    def __init(self, kind='map'):
        self.df = pd.DataFrame()


def home_page():

    url = "https://github.com/MicrobiologyETHZ/mbarq"
    docs_url = "https://mbarq.readthedocs.io/en/latest/"

    st.info(f""" 
    

   Transposon mutagenesis is a powerful technique that allows identification of bacterial fitness factors under different environmental conditions. Recently, a number of studies have used barcoded transposon mutant libraries to increase the throughput of the experiments. mBARq allows easy processing and analysis of barcoded mutant libraries for any transposon construct. To learn more about analysis of barcoded sequencing data using mBARq,  please read [the documentation]({docs_url}). This app allows exploration of data analyzed with [mBARq tool]({url}).


    """)

    st.markdown("""
    # 
    
    ## Pages:

    1. ### üìç Library Map
        - `csv` file generated by `mbarq map` command listing the insertion site of each barcode in your library
        - This page allows you to visualize the insertions found in your library and provides some basic summary statistics.
        
    
    
    """)


    st.markdown("""
    ***
    
    2. ### : Count and sample data files
        - Count file is a `csv` file generated by `mbarq count` and `mbarq merge` commands
        - Sample data file is a `csv` file describing the experimental design
        - Visit üìà **Exploratory Analysis** page for examples
        - üìà Exploratory Analysis page generates an interactive PCA plot and barcode abundance plots for genes of interest
        
    """)


    st.markdown("""
        
    ***
    
    3. ### Final results table and annotations file (optional)
        - Final results is a `csv` file produced by `mbarq analyze` listing log fold changes (LFC) and FDRs for each gene in the library
        - üìä **Differential Abundance** page allows visualisation of LFCs for genes of interest
        - **KEGG** page allows visualisation of results in the context of KEGG pathway maps
        - **STRING** pages allows functional analysis via STRING-db
    """)



home_page()



